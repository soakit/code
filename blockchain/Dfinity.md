# Dfinity

## 1. 介绍

原先的**以太坊姐妹链**的主张，到如今对标 TCP/IP 的 **ICP**，致力于打造**分布式的互联网计算机系统，重塑互联网基础架构，成为一个分布式的云平台**，代币也从 DFN 变换为 ICP。

### 1.1 新价值主张

打造开放式的互联网计算机，目标受众更聚焦于开发者和创业团队。

### 1.2 新追求

正式愿景定位为互联网计算机(Internet Computer)，缩写为ICP。

### 1.3 ICP

ICP 实际上是一个分布式云计算平台和协议。理解 Dfinity 的新定位—互联网计算机，真的把他当做一台超大型的分布式计算机系统来理解，可能会更方便。

- 提供了开放的通讯协议，ICP 协议，在该协议之上，可以运行通用的计算。
- 一个全球的计算机网络，确保协议能够正常运行，而包含在其中的，是独立的数据中心，每个数据中心由多个节点组成，提供了运行软件或者说智能合约所需要的硬件资源，如 CPU、网络和内存资源。
- 一个公开的 SAAS 平台，扩展性良好，开发者可以像使用任何一个云平台一样，部署软件应用，比如 DeFi、NFT 等具体的应用。

需要注意的是，ICP 也是采取了**内存存储**的方式，提升程序的运行速度，由此带来的，是对数据中心的要求会比较高。

Dfinity 希望借助于拜占庭容错和加密算法，让软件不依赖于防火墙等设施，也能具备防篡改的功能，支持智能合约软件自动运行，且结合了代币经济模型的设计，实现激励和软件所在生态的自治。

#### 1.3.1 NNS: ICP 互联网计算机的神经网络

如果说 ICP 是一台巨型的全球计算机，集合了诸多的数据中心和节点，那么 ICP 跟传统的云平台又有什么不同？毕竟 AWS、GCP、Azure、阿里云、腾讯云或者是公司自建的私有云服务，也是用的数据中心，异地备援，多节点运行的。

区别在于 NNS。ICP 之所以不是另外一个云平台，而是开放式计算平台，其区别在于被成为 NNS 的治理系统，或者可以做个通俗化但不那么精确的理解：

> 代币化 + DAO 治理 + 云服务 = ICP
>
> DAO 是Decentralized Autonomous Organization的缩写，是基于区块链核心思想理念，由达成同一个共识的群体自发产生的共创、共建、共治、共享的协同行为，衍生出来的一种组织形态。**DAO 是区块链解决了人与人之间的信任问题之后的附属产物，是人类协作史上的一次革命性的进化，其本质是区块链技术应用的一种形式。**

#### 1.3.2 每个智能合约，都是可扩展的容器（Canister)

在 ICP 这个平台上，最基本的组成元素，被称为 Canister，可以翻译为容器，类似于以太坊等区块链公链平台上的智能合约，却也有若干不同之处。

**ICP 作为一个通用的云计算平台，理论上可以运行任何类型的应用。** Dfnity 社区也用 CanCan、LinkUp 等应用做了示例，这些分别对标抖音、LinkedIn 等传统互联网应用。

无论是用什么语言些的软件，都会编译为 **WebAssembly 模块**。想要运行，需要将这些模块部署到 ICP 的副本之中，而运行这些模块的执行环境，就被称为容器(Canister)。

#### 1.3.3 示例

[LinkedUp](https://qsuio-dqaaa-aaaaa-qa6oa-cai.ic0.app/)

请注意，在链接之中的 "qsuio-dqaaa-aaaaa-qa6oa-cai" 这一串编码，就是**前端容器的编码索引，无论是前端应用还是后端应用，甚至是钱包，都是以容器方式组织的**，在容器之中包含了编译之后的程序，以及该程序的运行状态等信息，支持查询和更新状态的操作。

### 1.3.4 Cycle：程序运行的“燃料”

在 ICP 这个云平台上，运行程序如果没有成本的话，势必会造成平台的计算带宽存储等资源被滥用。为此运行程序要有成本，并且为了防止单个程序/容器占用过多的资源，单个容器的运行可以使用的资源也有上限。

**ICP 采取的是 Cycle 这一单位作为计价。如果你熟悉以太坊或者类以太坊平台的生态，可以将其理解为一种价格稳定的 gas，不能流通，只能用作手续费使用。并且需要由容器的所有者来支付**。就是说这里的设计，采取了开发者付费的方式，按照我的理解，用户使用这些程序，是不需要支付费用的，而程序的开发者或者团队，需要将 ICP 代币兑换为 Cycle ，作为驱动程序运行的燃料，确保程序可用。

**尽管 ICP 价格可能波动，但是 Cycle 的价格，是锚定法币的。** 具体来说 1 瑞士法郎等价于 1兆(trillion) cycles 的计算资源，开发者需要将价值 1 瑞士法郎的 ICP，兑换为对应的 Cycle。这样 ICP 的价格不会影响到合约的运行，不会出现 ICP 价格高涨，运行合约或者说容器的成本也随之水涨船高的情况出现。

ICP 兑换为 Cycle 是单向的，就是说不能够从 Cycle 再兑换为 ICP 代币。而且Cycle 也不能流通、转账，只能供开发者自己使用，用在自己所控制的容器上，确保他们能够运行正常。

### 1.4 部分链接

> [Dfinity 区块链浏览器](https://www.dfinityexplorer.org)
> [Dfinity 白皮书](https://assets.ctfassets.net/ywqk17d3hsnp/2C8QU0x3q4AwuYYU4qiEmo/fb575987ca36672152a47b83ec96c0fc/dfinity-consensus.pdf)
> [Dfinity 代码仓库](https://github.com/dfinity)
> [官网](https://dfinity.org)

## 2. 概念

- NNS(神经网络系统)
  ![NNS](https://pics4.baidu.com/feed/8b13632762d0f703a451f762465902352497c5dc.jpeg?token=cad9232174af500dc58c7fba86a6c529)
- 神经元
  ![神经元](https://pics2.baidu.com/feed/54fbb2fb43166d228810f01308805aff9152d27a.jpeg?token=df5af4e84c86f90cf4277ba69e8b724b)
- Canister (容器）
  ![Canister](https://pics4.baidu.com/feed/f7246b600c3387441880ac061fac8af1d62aa0ab.jpeg?token=4d0372803ee2df3f4fc4ba2fa8ac5fa9)
- Cycles (手续费)
  ![Cycles](https://pics7.baidu.com/feed/18d8bc3eb13533faa0154f8bf970ae1740345b1b.jpeg?token=68554ece2c3de820dacfe0caccbf2a18)

## 3. ICP代币

### 3.1 代币的用途：治理和支付

ICP 代币主要有两类用途：

- 作为治理代币使用，ICP 持有者可以将其锁定在治理系统中，对提案进行投票。参与治理可以获得奖励。作为数据中心运行公共账本的补偿，或者说产生区块的奖励，也是用 ICP 支付的。
- 应用型代币，支付手续费。正如前面介绍过的，在 ICP 生态中，运行智能合约（或者说容器）需要消耗手续费（cycle)。与以太坊不同之处在于，ICP 的手续费是固定价格的，基本不会随着 ICP 代币的价格而波动。

由于 ICP 代币是驱动整个系统运行的关键，因此我们有必要专门了解下 ICP 代币模型设计，并借此了解在 Dfinity 之中各方的角色。

### 3.1 代币模型

![modl](https://pics2.baidu.com/feed/b21c8701a18b87d62de6f6e857ab7b301d30fdc8.jpeg?token=6639c859703b561679569cd54e5d659a)

这张图，清晰的表示了 ICP 生态中的各类角色和模型。

### 3.2 四类角色和作用

#### 3.2.1 ICP 持有者

除了持币待涨之外，ICP 持有者还可以参与生态治理。Dfinity 采取的是链上治理模式，称之为 NNS ，神经网络系统。那么组成神经网络系统的每一个部分，就被成为一个神经元，而**创建神经元，就需要 ICP 持有人锁定代币来产生。**

相应的，当用户准备赎回代币的时候，就需要溶解掉神经元，经过半个月到八年左右的延迟期之后，代币会回到用户手中，可以自由流通。

参与治理，可以获得到投票奖励，ICP 持有者通过锁仓所创建的神经元，也可以自动跟随其他的神经元进行投票。由于锁定期往往较长，因此参与治理进行投票表决的时候，预期持有者会做出审慎的考虑。

投票的权重，除了受到锁定币量的多少，也会受到锁仓时间、神经元已经存在时间的影响。

#### 3.2.2 数据节点

这些节点的作用主要是：作为超级运算中心，提供给 ICP 的基础服务，包括运行计算、相互通讯、存储信息等。每个数据中心会包含若干个数据节点，而多个数据节点，又可以组成子网络，供计算容器使用。

作为提供服务的回报，这些节点可以获得 ICP 代币作为奖励，这也是系统之中增发较多代币的一部分。每个节点在一段时间内获得的回报是大致恒定的。

数据中心想要加入到 ICP 网络之中，首先要做的是获得一个 DCID,即数据中心 ID。通过 NNS 这一算法治理系统为数据中心生成该 ID, 然后数据中心能参与网络之中，提供数据节点。

如果互联网计算机需要更多的处理能力，会引入更多的节点机器，形成子网，承载容器的运转。Dfinity 希望在十年内，可以吸引上千的数据中心加入。不过具体给数据中心的报酬如何，是否具有吸引力，还有待更多细节披露。

#### 3.2.3 ICP 生态之中的关键角色：开发者

开发者将软件代码编译部署到 ICP 之后，需要消耗 ICP 代币转换为 Cycle 燃料，换取数据节点提供的服务，维持自己的容器运行，供用户使用。如前所述，ICP 之中的燃料手续费，是采用固定价格的，并且消耗量相对稳定，有助于开发者做好预算。

并且这部分 ICP 代币是单向转换，Cycle 采取的是消耗模式，因此随着使用，ICP 会消耗掉这一部分，对 ICP 产生通缩压力。

#### 3.2.4 软件的用户

作为终端用户，其实是可以不必去管应用背后的平台如何，对他们而言，运行在 ICP 基础设施上的软件，如果能够提供传统互联网的便捷 + 分布式账本的安全可信的提升，并且进一步可以从软件的分布式治理中得到更强的激励，会得到更好的用户感受。

**使用淘宝的用户，不用为了浏览网页挑选商品而付费，只需要在下单时候付款即可。根据笔者理解，这是 ICP 试图跟以太坊等平台不同的方向之一**。ICP 试图实现这一点，运行在其上的程序所产生的计算等成本，由软件的开发者所承担，用户只需为自己所挑选的产品或服务付费即可，无需为使用软件本身支付费用。

不过，这是否也会带来一定的影响，导致 ICP 代币的消耗场景变少？由于尚未到达大规模用户上线测试的阶段，这一问题的答案，我们或许还要等好久才能得到。

## 4. 生态项目

- Capsule：去中心化社交媒体
- Distrikt：基于 ICP 打造专业社交媒体
   Distrikt 将是 LinkedIn、Twitter 和 Medium 之间的结合体 ...... 但是是一个“去中心化的、民有、民治、民享的平台”。
- Fleek：计划迁移上万个以太坊应用和 NFT 项目至 Dfinity
  据报道，完成迁移之后，Fleek 上 11000 个基于传统和区块链的网站能够在互联网计算机（ICP) 的主网上运行，Fleek 有望成为 DFINITY 互联网计算机「主网」最早的应用之一。此外为了提供快速、安全和可扩展的网络速度，Fleek 计划将托管服务扩充至 DFINITY 的互联网计算机上。双方将使基于以太坊的 DeFi 应用和 NFT 项目能够以网络速度运行，并大大降低 Gas 费用，并且降低对环境的影响。
- Tacen：Dfinity 上计划的首个 DEX（去中心化交易所Decentralized exchange）
  Tacen 融资了230万美元，计划在 Dfinity 上打造 DEX，预计于 2021 年 3 季度上线，不过目前还没有可公开测试的版本，代币为 TXA。
  根据 Tacen 官网介绍，计划弥补中心化交易所和去中心化交易所在安全和速度之间的裂隙，实现企业级别产品速度的同时，又无需进行 KYC，用户能够完全自主控制自己的资产。通过智能钱包、速度撮合订单、以及结算数据预言机等基础设施，实现融合。除了交易加密货币之外，也可以用于 NFT 资产的交易。
- Openchat
  OpenChat 将是继 LinkedUp 和 CanCan 等互联网计算机上的开放应用之后，DFINITY 上第一个去中心化的加密通信应用。据 OpenChat 的软件工程师 Hamish Peebles 介绍，尽管 OpenChat 在功能上与 WhatsApp、Signal、Telegram 等非常相似，但是所有权归用户，且代码公开可查，用户会分配得到代币，且对于应用有最终决定权。
